<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Vaxel S.A. - Gestión de Inventario</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/@zxing/browser@0.0.11/umd/index.min.js"></script>
    <script src="https://unpkg.com/papaparse@5.3.0/papaparse.min.js"></script>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAV4g9ctk9_LzYmGr5ETClPUkZWVSBpkZk",
            authDomain: "vaxel-inventario.firebaseapp.com",
            projectId: "vaxel-inventario",
            databaseURL: "https://vaxel-inventario-default-rtdb.firebaseio.com",
            storageBucket: "vaxel-inventario.appspot.com",
            messagingSenderId: "951934989668",
            appId: "1:951934989668:web:4f620f4c330c6b12a02b11",
            measurementId: "G-4X5YQJ53C4"
        };
    </script>
    <script src="app.js" defer></script>
</head>

<body>
    <header>
        <button id="menu-btn" class="icon-btn"><span class="material-icons">menu</span></button>
        <h1>Vaxel S.A.</h1>
    </header>

    <nav id="side-menu" class="side-menu">
        <button id="close-menu-btn" class="icon-btn"><span class="material-icons">close</span></button>
        <h3>Configuración</h3>
        <ul class="menu-list">
            <li><button class="menu-item" id="import-catalogo-btn"><span class="material-icons">cloud_upload</span> Cargar Catálogo de
                    SKUs</button></li>
            <li><button class="menu-item" id="export-all-data-btn"><span class="material-icons">download</span> Exportar Todas las
                    Tablas</button></li>
            <li><button class="menu-item" id="clear-all-btn"><span class="material-icons">delete_forever</span> Borrar Todas las
                    Tablas</button></li>
            <li>
                <label class="toggle-container">
                    <input type="checkbox" id="toggle-location-requirement">
                    <span class="slider round"></span>
                    <span class="toggle-text">Ubicación No Requerida</span>
                </label>
            </li>
        </ul>
        <div class="firebase-status">
            <span id="firebase-status"></span>
        </div>
    </nav>

    <main id="main-content">
        <div id="picking-tab" class="tab-content active">
            <h2>Picking</h2>
            <form id="picking-form" class="stock-form">
                <div class="input-group">
                    <label for="picking-sku">SKU</label>
                    <div class="input-with-scan">
                        <input type="text" id="picking-sku" placeholder="Escanear o ingresar SKU" required>
                        <button type="button" class="scan-btn" data-input="picking-sku"><span class="material-icons">qr_code_scanner</span></button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="picking-ubicacion">Ubicación</label>
                    <div class="input-with-scan">
                        <input type="text" id="picking-ubicacion" placeholder="Escanear o ingresar ubicación" required>
                        <button type="button" class="scan-btn" data-input="picking-ubicacion"><span class="material-icons">qr_code_scanner</span></button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="picking-cantidad">Cantidad</label>
                    <input type="number" id="picking-cantidad" placeholder="Cantidad a retirar" required min="1">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Registrar Picking</button>
                    <button id="export-picking-btn" class="btn" type="button">Exportar Picking</button>
                </div>
            </form>
            <div id="picking-data" class="data-view"></div>
        </div>

        <div id="almacen-tab" class="tab-content">
            <h2>Almacén</h2>
            <form id="almacen-form" class="stock-form">
                <div class="input-group">
                    <label for="almacen-sku">SKU</label>
                    <div class="input-with-scan">
                        <input type="text" id="almacen-sku" placeholder="Escanear o ingresar SKU" required>
                        <button type="button" class="scan-btn" data-input="almacen-sku"><span class="material-icons">qr_code_scanner</span></button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="almacen-ubicacion">Ubicación</label>
                    <div class="input-with-scan">
                        <input type="text" id="almacen-ubicacion" placeholder="Escanear o ingresar ubicación" required>
                        <button type="button" class="scan-btn" data-input="almacen-ubicacion"><span class="material-icons">qr_code_scanner</span></button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="almacen-cantidad">Cantidad</label>
                    <input type="number" id="almacen-cantidad" placeholder="Cantidad a guardar" required min="1">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Registrar Ingreso</button>
                    <button id="export-almacen-btn" class="btn" type="button">Exportar Almacén</button>
                </div>
            </form>
            <div id="almacen-data" class="data-view"></div>
        </div>

        <div id="movimientos-tab" class="tab-content">
            <h2>Movimientos entre ubicaciones</h2>
            <form id="movimientos-form" class="stock-form">
                <div class="input-group">
                    <label for="origen-select">Ubicación Origen</label>
                    <div class="input-with-scan">
                        <select id="origen-select" required>
                            <option value="">Seleccione o escanee</option>
                        </select>
                        <button type="button" class="scan-btn" data-input="origen-select"><span class="material-icons">qr_code_scanner</span></button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="destino-select">Ubicación Destino</label>
                    <div class="input-with-scan">
                        <select id="destino-select" required>
                            <option value="">Seleccione o escanee</option>
                        </select>
                        <button type="button" class="scan-btn" data-input="destino-select"><span class="material-icons">qr_code_scanner</span></button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="movimiento-sku">SKU</label>
                    <div class="input-with-scan">
                        <input type="text" id="movimiento-sku" placeholder="Escanear o ingresar SKU" required>
                        <button type="button" class="scan-btn" data-input="movimiento-sku"><span class="material-icons">qr_code_scanner</span></button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="movimiento-cantidad">Cantidad</label>
                    <input type="text" id="movimiento-cantidad" placeholder="Cantidad a mover" required>
                </div>
                <div class="input-group">
                    <p>Total: <strong id="movimientos-total">0</strong></p>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Registrar Movimiento</button>
                    <button id="export-movimientos-btn" class="btn" type="button">Exportar Movimientos</button>
                </div>
            </form>
            <div id="movimientos-data" class="data-view"></div>
        </div>

        <div id="contar-tab" class="tab-content">
            <h2>Por Contar</h2>
            <div class="stock-form">
                <div class="input-group">
                    <label for="file-input">Cargar Lista de SKU (Excel)</label>
                    <input type="file" id="file-input" accept=".xlsx, .xls">
                </div>
                <div class="form-actions">
                    <button type="button" id="upload-count-list-btn" class="btn btn-primary">Subir Lista</button>
                    <button id="export-contar-btn" class="btn" type="button">Exportar Conteo</button>
                    <button id="clear-contar-btn" class="btn" type="button">Borrar Lista</button>
                </div>
                <p id="file-status"></p>
            </div>
            <div id="contar-list-container" class="data-view"></div>
        </div>

    </main>

    <div id="scanner-modal" class="modal">
        <div class="modal-content">
            <div id="scanner-container"></div>
            <button id="stop-scanner-btn" class="btn btn-danger"><span class="material-icons">close</span> Detener Escáner</button>
        </div>
    </div>

    <footer id="nav-bar">
        <button class="nav-btn active" data-tab="picking-tab"><span class="material-icons">inventory</span><span>Picking</span></button>
        <button class="nav-btn" data-tab="almacen-tab"><span class="material-icons">storage</span><span>Almacén</span></button>
        <button class="nav-btn" data-tab="movimientos-tab"><span class="material-icons">swap_horiz</span><span>Movimientos</span></button>
        <button class="nav-btn" data-tab="contar-tab"><span class="material-icons">fact_check</span><span>Por Contar</span></button>
    </footer>

    <div id="custom-dialog-overlay" class="custom-dialog-overlay" style="display: none;">
        <div class="custom-dialog-box">
            <h3 id="custom-dialog-title"></h3>
            <p id="custom-dialog-message"></p>
            <div id="custom-dialog-actions" class="dialog-actions"></div>
        </div>
    </div>

</body>

</html>
